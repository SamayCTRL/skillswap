<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill Swap - Share Your Skills, Learn from Others</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/responsive.css">
    
    <!-- Google OAuth -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <!-- Inline CSS for critical styles -->
    <style>
        body {
            margin: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8fafc;
        }
        .btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 4px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .btn-primary { background: #3B82F6; color: white; }
        .btn-secondary { background: #6B7280; color: white; }
        .btn-success { background: #10B981; color: white; }
        .btn:hover { opacity: 0.9; transform: translateY(-1px); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .hero { text-align: center; padding: 60px 20px; }
        .hero h1 { font-size: 3rem; margin-bottom: 1rem; color: #1F2937; }
        .hero p { font-size: 1.2rem; color: #6B7280; margin-bottom: 2rem; }
        .hero-actions { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        .navbar { display: flex; align-items: center; justify-content: space-between; padding: 1rem 2rem; background: white; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .nav-links { display: flex; gap: 2rem; }
        .nav-link { text-decoration: none; color: #374151; font-weight: 500; }
        .nav-link:hover { color: #3B82F6; }
        .logo { font-size: 1.5rem; font-weight: 700; color: #3B82F6; text-decoration: none; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="navbar" id="navbar">
            <a href="#" onclick="showPage('home')" class="logo">üîÑ Skill Swap</a>
            <div class="nav-links">
                <a href="#" onclick="showPage('home')" class="nav-link">Home</a>
                <a href="#" onclick="showPage('browse')" class="nav-link">Browse Skills</a>
                <a href="#" onclick="showPage('dashboard')" class="nav-link">Dashboard</a>
                <a href="#" onclick="showPage('messages')" class="nav-link">Messages</a>
            </div>
            <div id="auth-buttons">
                <button class="btn btn-secondary" onclick="showPage('login')">Sign In</button>
                <button class="btn btn-primary" onclick="showPage('register')">Get Started</button>
                <button class="btn btn-success" onclick="showPage('upgrade')">Upgrade to Pro</button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main id="page-content">
        <div class="hero">
            <div class="container">
                <h1>Welcome to Skill Swap</h1>
                <p>Share your skills, learn from others, and grow together in our community marketplace.</p>
                
                <div class="hero-actions">
                    <button class="btn btn-primary" onclick="showPage('browse')">Browse Skills</button>
                    <button class="btn btn-secondary" onclick="showPage('dashboard')">Dashboard</button>
                    <button class="btn btn-success" onclick="showPage('upgrade')">Upgrade to Pro - $19.99/month</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Ultra-Simple, Bulletproof JavaScript -->
    <script>
        console.log('üöÄ Skill Swap - Ultra-Simple Navigation System Loading...');
        
        // AUTHENTICATION FUNCTIONS
        async function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // Store tokens
                    localStorage.setItem('accessToken', data.tokens.accessToken);
                    localStorage.setItem('refreshToken', data.tokens.refreshToken);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    
                    alert('‚úÖ Login successful! Welcome back!');
                    updateHeader();
                    showPage('dashboard');
                } else {
                    alert('‚ùå Login failed: ' + data.error);
                }
            } catch (error) {
                console.error('Login error:', error);
                alert('‚ùå Login failed. Please try again.');
            }
        }
        
        async function handleRegister(event) {
            event.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ name, email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // Store tokens
                    localStorage.setItem('accessToken', data.tokens.accessToken);
                    localStorage.setItem('refreshToken', data.tokens.refreshToken);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    
                    alert('‚úÖ Account created successfully! Welcome to Skill Swap!');
                    updateHeader();
                    showPage('dashboard');
                } else {
                    alert('‚ùå Registration failed: ' + data.error);
                }
            } catch (error) {
                console.error('Registration error:', error);
                alert('‚ùå Registration failed. Please try again.');
            }
        }
        
        function signInWithGoogle() {
            alert('üîç Google Sign-In will be implemented here. For now, using demo login...');
            // Demo login for testing
            localStorage.setItem('user', JSON.stringify({ name: 'Demo User', email: 'demo@example.com' }));
            alert('‚úÖ Demo login successful!');
            updateHeader();
            showPage('dashboard');
        }
        
        function signUpWithGoogle() {
            alert('üîç Google Sign-Up will be implemented here. For now, using demo registration...');
            // Demo registration for testing
            localStorage.setItem('user', JSON.stringify({ name: 'Demo User', email: 'demo@example.com' }));
            alert('‚úÖ Demo account created successfully!');
            updateHeader();
            showPage('dashboard');
        }
        
        function handleUpgrade() {
            const user = JSON.parse(localStorage.getItem('user'));
            if (!user) {
                alert('üîê Please sign in first to upgrade your account.');
                showPage('login');
                return;
            }
            
            const confirmed = confirm('üí≥ Upgrade to Pro for $19.99/month?\n\nYou will get:\n‚Ä¢ Unlimited skills\n‚Ä¢ Priority listing\n‚Ä¢ Advanced features\n‚Ä¢ Premium support');
            
            if (confirmed) {
                // Update user to pro in localStorage for demo
                user.isPro = true;
                user.plan = 'pro';
                localStorage.setItem('user', JSON.stringify(user));
                
                alert('‚úÖ Successfully upgraded to Pro! Welcome to Skill Swap Pro!');
                showPage('dashboard');
            }
        }
        
        function logout() {
            localStorage.removeItem('accessToken');
            localStorage.removeItem('refreshToken');
            localStorage.removeItem('user');
            alert('üëã Successfully logged out!');
            updateHeader();
            showPage('home');
        }
        
        function isLoggedIn() {
            return localStorage.getItem('user') !== null;
        }
        
        // UPDATE HEADER BASED ON AUTH STATE
        function updateHeader() {
            const authButtons = document.getElementById('auth-buttons');
            const user = getCurrentUser();
            
            if (user) {
                const isPro = user.isPro || false;
                authButtons.innerHTML = `
                    <span style="margin-right: 15px; color: #374151;">Welcome, ${user.name} ${isPro ? '‚≠ê' : ''}</span>
                    <button class="btn btn-secondary" onclick="showPage('dashboard')">Dashboard</button>
                    <button class="btn btn-primary" onclick="logout()">Logout</button>
                `;
            } else {
                authButtons.innerHTML = `
                    <button class="btn btn-secondary" onclick="showPage('login')">Sign In</button>
                    <button class="btn btn-primary" onclick="showPage('register')">Get Started</button>
                    <button class="btn btn-success" onclick="showPage('upgrade')">Upgrade to Pro</button>
                `;
            }
        }
        // NAVIGATION FUNCTIONS
        function showPage(pageName) {
            console.log('üéØ Showing page:', pageName);
            console.log('üîç Current URL before:', window.location.pathname);
            
            // Handle home page explicitly
            if (pageName === 'home' || !pageName) {
                history.pushState({page: 'home'}, '', '/');
            } else {
                // Update URL without page reload
                history.pushState({page: pageName}, '', `/${pageName}`);
            }
            
            console.log('üîç Current URL after:', window.location.pathname);
            
            // Load page content
            loadPageContent();
            
            // Update header to reflect current state
            updateHeader();
            
            console.log('‚úÖ showPage completed for:', pageName);
        }
        
        function navigateToPage(path) {
            const pageName = path.replace('/', '') || 'home';
            showPage(pageName);
        }
        
        function getCurrentUser() {
            const userStr = localStorage.getItem('user');
            return userStr ? JSON.parse(userStr) : null;
        }
        
        function showLoginModal() {
            console.log('üîê Login modal triggered');
            alert('Login functionality: This will be implemented with authentication. Redirecting to dashboard...');
            navigateToPage('/dashboard');
        }
        
        function showRegisterModal() {
            console.log('üìù Register modal triggered');
            alert('Registration functionality: This will be implemented with authentication. Redirecting to dashboard...');
            navigateToPage('/dashboard');
        }
        
        // CONTENT LOADING
        function loadPageContent() {
            const path = window.location.pathname;
            const content = document.getElementById('page-content');
            
            if (!content) {
                console.error('‚ùå Page content element not found!');
                return;
            }
            
            console.log('üìÑ Loading content for path:', path);
            
            // Handle home page first
            if (path === '/' || path === '/home') {
                content.innerHTML = `
                    <div class="hero">
                        <div class="container">
                            <h1>Welcome to Skill Swap</h1>
                            <p>Share your skills, learn from others, and grow together in our community marketplace.</p>
                            
                            <div class="hero-actions">
                                <button class="btn btn-primary" onclick="showPage('browse')">Browse Skills</button>
                                <button class="btn btn-secondary" onclick="showPage('dashboard')">Dashboard</button>
                                <button class="btn btn-success" onclick="showPage('upgrade')">Upgrade to Pro - $19.99/month</button>
                            </div>
                        </div>
                    </div>
                `;
                console.log('üè† Homepage loaded successfully');
                return;
            }
            
            switch (path) {
                case '/login':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px; max-width: 500px;">
                            <h1>üîê Sign In to Skill Swap</h1>
                            <p>Welcome back! Sign in to your account.</p>
                            
                            <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 20px 0;">
                                <form id="loginForm" onsubmit="handleLogin(event)">
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Email:</label>
                                        <input type="email" id="loginEmail" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;">
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Password:</label>
                                        <input type="password" id="loginPassword" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;">
                                    </div>
                                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 15px;">Sign In</button>
                                </form>
                                
                                <div style="text-align: center; margin: 20px 0;">
                                    <p style="color: #6B7280;">OR</p>
                                </div>
                                
                                <button class="btn btn-secondary" onclick="signInWithGoogle()" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;">
                                    <span>üîç</span> Sign in with Google
                                </button>
                                
                                <div style="text-align: center; margin-top: 20px;">
                                    <p>Don't have an account? <a href="#" onclick="showPage('register')" style="color: #3B82F6;">Sign up here</a></p>
                                </div>
                            </div>
                            
                            <div style="text-align: center;">
                                <button class="btn btn-secondary" onclick="showPage('home')">‚Üê Back to Home</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case '/register':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px; max-width: 500px;">
                            <h1>üìù Create Your Account</h1>
                            <p>Join Skill Swap and start sharing your skills!</p>
                            
                            <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 20px 0;">
                                <form id="registerForm" onsubmit="handleRegister(event)">
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Full Name:</label>
                                        <input type="text" id="registerName" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;">
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Email:</label>
                                        <input type="email" id="registerEmail" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;">
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Password:</label>
                                        <input type="password" id="registerPassword" required minlength="6" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;">
                                    </div>
                                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 15px;">Create Account</button>
                                </form>
                                
                                <div style="text-align: center; margin: 20px 0;">
                                    <p style="color: #6B7280;">OR</p>
                                </div>
                                
                                <button class="btn btn-secondary" onclick="signUpWithGoogle()" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;">
                                    <span>üîç</span> Sign up with Google
                                </button>
                                
                                <div style="text-align: center; margin-top: 20px;">
                                    <p>Already have an account? <a href="#" onclick="showPage('login')" style="color: #3B82F6;">Sign in here</a></p>
                                </div>
                            </div>
                            
                            <div style="text-align: center;">
                                <button class="btn btn-secondary" onclick="showPage('home')">‚Üê Back to Home</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case '/upgrade':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px; max-width: 600px;">
                            <h1>‚≠ê Upgrade to Skill Swap Pro</h1>
                            <p>Unlock premium features and take your skills to the next level!</p>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0;">
                                <!-- Free Plan -->
                                <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border: 2px solid #e5e7eb;">
                                    <h3>Free Plan</h3>
                                    <p style="font-size: 24px; font-weight: bold; color: #10B981;">$0/month</p>
                                    <ul style="list-style: none; padding: 0;">
                                        <li>‚úÖ Basic skill sharing</li>
                                        <li>‚úÖ Up to 3 skills</li>
                                        <li>‚úÖ Basic messaging</li>
                                        <li>‚ùå Priority support</li>
                                        <li>‚ùå Advanced analytics</li>
                                        <li>‚ùå Custom branding</li>
                                    </ul>
                                    <p style="text-align: center; font-weight: bold; color: #6B7280;">Current Plan</p>
                                </div>
                                
                                <!-- Pro Plan -->
                                <div style="background: linear-gradient(135deg, #3B82F6, #1D4ED8); color: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 2px solid #3B82F6;">
                                    <h3>Pro Plan</h3>
                                    <p style="font-size: 24px; font-weight: bold;">$19.99/month</p>
                                    <ul style="list-style: none; padding: 0;">
                                        <li>‚úÖ Unlimited skills</li>
                                        <li>‚úÖ Priority listing</li>
                                        <li>‚úÖ Advanced messaging</li>
                                        <li>‚úÖ Priority support</li>
                                        <li>‚úÖ Detailed analytics</li>
                                        <li>‚úÖ Custom profile branding</li>
                                        <li>‚úÖ Video call integration</li>
                                        <li>‚úÖ Premium badge</li>
                                    </ul>
                                    <button class="btn btn-success" onclick="handleUpgrade()" style="width: 100%; background: #10B981; border: none;">Upgrade Now</button>
                                </div>
                            </div>
                            
                            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                <h4>Why Upgrade to Pro?</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                    <div>üöÄ <strong>Get More Bookings:</strong> Priority placement in search results</div>
                                    <div>üìä <strong>Track Success:</strong> Advanced analytics and insights</div>
                                    <div>üí¨ <strong>Better Communication:</strong> Video calls and advanced messaging</div>
                                    <div>‚≠ê <strong>Stand Out:</strong> Premium badge and custom branding</div>
                                </div>
                            </div>
                            
                            <div style="text-align: center;">
                                <button class="btn btn-secondary" onclick="showPage('home')">‚Üê Back to Home</button>
                                <button class="btn btn-primary" onclick="showPage('dashboard')">View Dashboard</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case '/browse':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px;">
                            <h1>üîç Browse Skills</h1>
                            <p>Discover amazing skills shared by our community members.</p>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üé∏ Guitar Lessons</h3>
                                    <p>Learn acoustic and electric guitar from beginner to advanced levels.</p>
                                    <p><strong>$25/hour</strong></p>
                                    <button class="btn btn-primary">View Details</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üíª Web Development</h3>
                                    <p>Full-stack development using React, Node.js, and modern tools.</p>
                                    <p><strong>$50/hour</strong></p>
                                    <button class="btn btn-primary">View Details</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üé® Digital Art</h3>
                                    <p>Learn digital illustration and design using Photoshop and Illustrator.</p>
                                    <p><strong>$30/hour</strong></p>
                                    <button class="btn btn-primary">View Details</button>
                                </div>
                            </div>
                            
                            <div style="margin: 20px 0; text-align: center;">
                                <button class="btn btn-secondary" onclick="showPage('home')">‚Üê Back to Home</button>
                                <button class="btn btn-primary" onclick="showPage('dashboard')">Go to Dashboard</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case '/dashboard':
                    const user = getCurrentUser();
                    if (!user) {
                        alert('üîê Please sign in to access your dashboard.');
                        showPage('login');
                        return;
                    }
                    
                    const isPro = user.isPro || false;
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <div>
                                    <h1>üìã Welcome back, ${user.name}!</h1>
                                    <p>Your personal dashboard ${isPro ? '‚≠ê Pro Member' : 'üÜì Free Plan'}</p>
                                </div>
                                <div>
                                    ${!isPro ? '<button class="btn btn-success" onclick="showPage(\'upgrade\')">Upgrade to Pro</button>' : '<span style="background: linear-gradient(135deg, #3B82F6, #1D4ED8); color: white; padding: 8px 16px; border-radius: 20px; font-weight: bold;">‚≠ê PRO</span>'}
                                    <button class="btn btn-secondary" onclick="logout()" style="margin-left: 10px;">Logout</button>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üìö Your Skills</h3>
                                    <p>${isPro ? 'Unlimited skills' : '3 skills max'}</p>
                                    <p style="color: #6B7280;">Currently: 2 active skills</p>
                                    <button class="btn btn-primary">Manage Skills</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üìÖ Upcoming Sessions</h3>
                                    <p>2 sessions this week</p>
                                    <p style="color: #6B7280;">Next: Tomorrow 2:00 PM</p>
                                    <button class="btn btn-primary">View Calendar</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üí∞ Earnings</h3>
                                    <p>$${isPro ? '245' : '150'} this month</p>
                                    <p style="color: #6B7280;">${isPro ? '+63% vs last month' : 'Upgrade for more earnings'}</p>
                                    <button class="btn btn-primary">View Details</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>‚≠ê Reviews</h3>
                                    <p>4.8/5 average rating</p>
                                    <p style="color: #6B7280;">12 total reviews</p>
                                    <button class="btn btn-primary">View Reviews</button>
                                </div>
                            </div>
                            
                            ${isPro ? `
                                <div style="background: linear-gradient(135deg, #3B82F6, #1D4ED8); color: white; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                    <h3>‚≠ê Pro Features Active</h3>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                        <div>‚úÖ Unlimited Skills</div>
                                        <div>‚úÖ Priority Listing</div>
                                        <div>‚úÖ Advanced Analytics</div>
                                        <div>‚úÖ Video Call Integration</div>
                                    </div>
                                </div>
                            ` : `
                                <div style="background: #f0f9ff; border: 2px solid #3B82F6; padding: 20px; border-radius: 8px; margin: 20px 0; text-align: center;">
                                    <h3>üöÄ Ready to Level Up?</h3>
                                    <p>Upgrade to Pro and unlock unlimited skills, priority listing, and premium features!</p>
                                    <button class="btn btn-success" onclick="showPage('upgrade')">Upgrade to Pro - $19.99/month</button>
                                </div>
                            `}
                            
                            <div style="margin: 20px 0; text-align: center;">
                                <button class="btn btn-primary" onclick="showPage('browse')">Browse Skills</button>
                                <button class="btn btn-secondary" onclick="showPage('messages')">Messages</button>
                                <button class="btn btn-secondary" onclick="showPage('home')">‚Üê Back to Home</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case '/messages':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px;">
                            <h1>üí¨ Messages</h1>
                            <p>Your conversations with other users.</p>
                            
                            <div style="background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 20px 0;">
                                <div style="padding: 20px; border-bottom: 1px solid #e5e7eb;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 40px; height: 40px; border-radius: 50%; background: #3B82F6; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">JS</div>
                                        <div>
                                            <h4 style="margin: 0;">John Smith</h4>
                                            <p style="margin: 0; color: #6B7280; font-size: 14px;">About guitar lessons...</p>
                                        </div>
                                        <div style="margin-left: auto; color: #6B7280; font-size: 12px;">2 min ago</div>
                                    </div>
                                </div>
                                <div style="padding: 20px; border-bottom: 1px solid #e5e7eb;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 40px; height: 40px; border-radius: 50%; background: #10B981; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">EM</div>
                                        <div>
                                            <h4 style="margin: 0;">Emily Chen</h4>
                                            <p style="margin: 0; color: #6B7280; font-size: 14px;">Web development project...</p>
                                        </div>
                                        <div style="margin-left: auto; color: #6B7280; font-size: 12px;">1 hour ago</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin: 20px 0; text-align: center;">
                                <button class="btn btn-secondary" onclick="showPage('home')">‚Üê Back to Home</button>
                                <button class="btn btn-primary" onclick="showPage('browse')">Browse Skills</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                default:
                    // For any unknown route, redirect to home
                    console.log('‚ö†Ô∏è Unknown route:', path, '- redirecting to home');
                    showPage('home');
                    break;
            }
        }
        
        // INITIALIZE EVERYTHING
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üì± DOM loaded, initializing bulletproof navigation...');
            
            // Update header based on auth state
            updateHeader();
            
            // Load appropriate content for current page
            loadPageContent();
            
            // Handle browser back/forward buttons
            window.addEventListener('popstate', function(e) {
                console.log('üîô Browser back/forward button pressed');
                loadPageContent();
                updateHeader();
            });
            
            // Add global test function for debugging
            window.testNavigation = function() {
                console.log('üß™ Testing navigation...');
                console.log('Current page:', window.location.pathname);
                
                console.log('üåØ Testing Browse navigation...');
                showPage('browse');
                
                setTimeout(() => {
                    console.log('üåØ Testing Dashboard navigation...');
                    showPage('dashboard');
                }, 1000);
                
                setTimeout(() => {
                    console.log('üåØ Testing Home navigation...');
                    showPage('home');
                }, 2000);
            };
            
            console.log('üéâ Bulletproof navigation system ready!');
            console.log('üß™ Type "testNavigation()" in console to test navigation');
        });
        
        console.log('üìã Script loaded successfully');
    </script>
</body>
</html>