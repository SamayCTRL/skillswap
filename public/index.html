<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill Swap - Share Your Skills, Learn from Others</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/responsive.css">
    
    <!-- Google OAuth -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <!-- Inline CSS for critical styles -->
    <style>
        body {
            margin: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8fafc;
            background-image: radial-gradient(#e5e7eb 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .btn {
            display: inline-block;
            padding: 14px 28px;
            margin: 6px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.2);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }
        .btn:hover::before {
            transform: translateX(100%);
        }
        .btn-primary { 
            background: linear-gradient(135deg, #3B82F6, #2563EB); 
            color: white; 
            border: none;
        }
        .btn-secondary { 
            background: white; 
            color: #374151; 
            border: 2px solid #D1D5DB;
        }
        .btn-success { 
            background: linear-gradient(135deg, #10B981, #059669); 
            color: white; 
            border: none;
        }
        .btn:hover { 
            opacity: 0.95; 
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        .btn:active {
            transform: translateY(-1px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        .hero { 
            text-align: center; 
            padding: 100px 24px; 
            background: linear-gradient(135deg, #EFF6FF, #F9FAFB);
            border-radius: 20px;
            margin: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
        }
        .hero h1 { 
            font-size: 3.5rem; 
            margin-bottom: 1.5rem; 
            color: #1F2937; 
            background: linear-gradient(135deg, #3B82F6, #1D4ED8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            letter-spacing: -0.5px;
        }
        .hero p { 
            font-size: 1.3rem; 
            color: #111827; 
            margin-bottom: 2.5rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.7;
        }
        .hero-actions { 
            display: flex; 
            gap: 1.5rem; 
            justify-content: center; 
            flex-wrap: wrap; 
            margin-top: 2rem;
        }
        .navbar { 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            padding: 1.2rem 2.5rem; 
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-bottom: 1px solid #E5E7EB;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .nav-links { 
            display: flex; 
            gap: 2.5rem; 
        }
        .nav-link { 
            text-decoration: none; 
            color: #374151; 
            font-weight: 500;
            position: relative;
            padding: 0.7rem 0;
            transition: color 0.3s ease;
        }
        .nav-link:hover { 
            color: #3B82F6; 
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, #3B82F6, #1D4ED8);
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 2px;
        }
        .nav-link:hover::after {
            width: 100%;
        }
        .logo { 
            font-size: 1.8rem; 
            font-weight: 800; 
            color: #3B82F6; 
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.7rem;
            transition: transform 0.3s ease;
        }
        .logo:hover {
            transform: scale(1.05);
        }
        .hidden { display: none !important; }
        
        /* Ensure logo is visible */
        .logo-text { 
            color: #3B82F6; 
            font-weight: 800;
            background: linear-gradient(135deg, #3B82F6, #1D4ED8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Improve text readability */
        .readable-text { color: #1F2937; }
        
        /* Ensure good contrast on white backgrounds */
        [style*="background: white"],
        [style*="background-color: white"],
        [style*="#fff"],
        [style*="#ffffff"] {
            color: #1F2937 !important;
        }
        
        /* Specific card styles */
        .card-enhanced,
        .feature-card,
        .value-prop {
            color: #1F2937;
        }
        
        /* Feature card enhancements for better contrast */
        .feature-card h3 {
            color: #111827;
            font-weight: 600;
        }
        
        .feature-card p {
            color: #1F2937;
            line-height: 1.6;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        /* Fix for navigation links */
        .nav-link:not(.disabled) { opacity: 1 !important; cursor: pointer !important; }
        .nav-link.disabled { opacity: 0.5 !important; cursor: not-allowed !important; }
        
        /* Card enhancements */
        .card-enhanced {
            background: white;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.08);
            padding: 2.5rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #E5E7EB;
            position: relative;
            overflow: hidden;
        }
        .card-enhanced:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.12);
        }
        .card-enhanced::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #3B82F6, #10B981);
        }
        
        /* Section enhancements */
        .section-title {
            font-size: 2.8rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 1.5rem;
            color: #1F2937;
            position: relative;
        }
        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #3B82F6, #10B981);
            margin: 1rem auto;
            border-radius: 2px;
        }
        .section-subtitle {
            font-size: 1.3rem;
            color: #6B7280;
            text-align: center;
            max-width: 750px;
            margin: 0 auto 3.5rem;
            line-height: 1.7;
        }
        
        /* Animation enhancements */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-on-scroll {
            animation: fadeInUp 0.6s ease forwards;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="navbar" id="navbar">
            <a href="/" class="logo"><span class="logo-text">üéì SkillSwap</span></a>
            <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/browse" class="nav-link">Browse Skills</a>
                <a href="/dashboard" class="nav-link" id="dashboard-link">Dashboard</a>
                <a href="/messages" class="nav-link" id="messages-link">Messages</a>
            </div>
            <div id="auth-buttons">
                <!-- Buttons will be dynamically updated based on auth state -->
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main id="page-content">
        <div class="hero animate-on-scroll">
            <div class="container">
                <h1>Welcome to Skill Swap</h1>
                <p>Share your skills, learn from others, and grow together in our vibrant community marketplace.</p>
                
                <div class="hero-actions">
                    <button class="btn btn-primary" data-navigate="/browse">üîç Browse Skills</button>
                    <button class="btn btn-secondary" data-navigate="/dashboard">üìä Dashboard</button>
                    <button class="btn btn-success" data-navigate="/upgrade">‚≠ê Upgrade to Pro - $19.99/month</button>
                </div>
            </div>
        </div>  
        
        <!-- Features Section -->
        <section class="container card-enhanced animate-on-scroll" style="margin: 40px auto; max-width: 1000px;">
            <h2 class="section-title">Why Choose Skill Swap?</h2>
            <p class="section-subtitle">Our platform connects passionate learners with expert instructors in a seamless marketplace.</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: 40px;">
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3rem; margin-bottom: 20px;">üéì</div>
                    <h3 style="font-size: 1.5rem; margin-bottom: 15px; color: #1F2937;">Expert Instructors</h3>
                    <p style="color: #6B7280; line-height: 1.6;">Learn from verified professionals with proven expertise in their fields.</p>
                </div>
                
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3rem; margin-bottom: 20px;">üîÑ</div>
                    <h3 style="font-size: 1.5rem; margin-bottom: 15px; color: #1F2937;">Skill Exchange</h3>
                    <p style="color: #6B7280; line-height: 1.6;">Share your knowledge and learn new skills in our collaborative community.</p>
                </div>
                
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3rem; margin-bottom: 20px;">üí∞</div>
                    <h3 style="font-size: 1.5rem; margin-bottom: 15px; color: #1F2937;">Earn Money</h3>
                    <p style="color: #6B7280; line-height: 1.6;">Verified instructors can monetize their skills and earn passive income.</p>
                </div>
            </div>
        </section>
        
        <!-- Testimonials Section -->
        <section class="container" style="margin: 60px auto; max-width: 1000px;">
            <h2 class="section-title">What Our Users Say</h2>
            <p class="section-subtitle">Join thousands of satisfied learners and instructors in our growing community.</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 40px;">
                <div class="card-enhanced">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #3B82F6, #1D4ED8); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 15px;">JD</div>
                        <div>
                            <h4 style="margin: 0 0 5px 0; color: #1F2937;">John Doe</h4>
                            <div style="color: #F59E0B;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        </div>
                    </div>
                    <p style="color: #6B7280; font-style: italic; line-height: 1.7;">"Skill Swap helped me learn guitar in just 3 months. My instructor was patient and knowledgeable!"</p>
                </div>
                
                <div class="card-enhanced">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #10B981, #059669); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 15px;">SJ</div>
                        <div>
                            <h4 style="margin: 0 0 5px 0; color: #1F2937;">Sarah Johnson</h4>
                            <div style="color: #F59E0B;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                        </div>
                    </div>
                    <p style="color: #6B7280; font-style: italic; line-height: 1.7;">"I've earned over $500 teaching photography skills. The platform is intuitive and the community is supportive."</p>
                </div>
                
                <div class="card-enhanced">
                    <div style="display: flex; align-items: center; margin-bottom: 20px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #8B5CF6, #7C3AED); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 15px;">MR</div>
                        <div>
                            <h4 style="margin: 0 0 5px 0; color: #1F2937;">Michael Rodriguez</h4>
                            <div style="color: #F59E0B;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        </div>
                    </div>
                    <p style="color: #6B7280; font-style: italic; line-height: 1.7;">"As a beginner in web development, I found excellent mentors who helped me land my first job in tech."</p>
                </div>
            </div>
        </section>
        
        <!-- CTA Section -->
        <section class="container" style="margin: 60px auto; text-align: center; max-width: 800px;">
            <div class="card-enhanced" style="background: linear-gradient(135deg, #3B82F6, #1D4ED8); color: white;">
                <h2 style="font-size: 2.5rem; margin-bottom: 1rem;">Ready to Start Learning?</h2>
                <p style="font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9;">Join our community of over 10,000 learners and instructors today.</p>
                <div>
                    <button class="btn btn-secondary" data-navigate="/register" style="background: white; color: #3B82F6; border: none; margin: 0 10px;">Get Started Free</button>
                    <button class="btn btn-success" data-navigate="/browse" style="margin: 0 10px;">Explore Skills</button>
                </div>
            </div>
        </section>

    <!-- Ultra-Simple, Bulletproof JavaScript -->
    <script>
        console.log('üöÄ Skill Swap - Ultra-Simple Navigation System Loading...');
        
        // AUTHENTICATION FUNCTIONS
        async function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // Store tokens
                    localStorage.setItem('accessToken', data.tokens.accessToken);
                    localStorage.setItem('refreshToken', data.tokens.refreshToken);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    
                    alert('‚úÖ Login successful! Welcome back!');
                    updateHeader();
                    showPage('dashboard');
                } else {
                    alert('‚ùå Login failed: ' + data.error);
                }
            } catch (error) {
                console.error('Login error:', error);
                alert('‚ùå Login failed. Please try again.');
            }
        }
        
        async function handleRegister(event) {
            event.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ name, email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // Store tokens
                    localStorage.setItem('accessToken', data.tokens.accessToken);
                    localStorage.setItem('refreshToken', data.tokens.refreshToken);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    
                    alert('‚úÖ Account created successfully! Welcome to Skill Swap!');
                    updateHeader();
                    showPage('dashboard');
                } else {
                    alert('‚ùå Registration failed: ' + data.error);
                }
            } catch (error) {
                console.error('Registration error:', error);
                alert('‚ùå Registration failed. Please try again.');
            }
        }
        
        function signInWithGoogle() {
            alert('üîç Google Sign-In will be implemented here. For now, using demo login...');
            // Demo login for testing
            localStorage.setItem('user', JSON.stringify({ name: 'Demo User', email: 'demo@example.com' }));
            alert('‚úÖ Demo login successful!');
            updateHeader();
            showPage('dashboard');
        }
        
        function signUpWithGoogle() {
            alert('üîç Google Sign-Up will be implemented here. For now, using demo registration...');
            // Demo registration for testing
            localStorage.setItem('user', JSON.stringify({ name: 'Demo User', email: 'demo@example.com' }));
            alert('‚úÖ Demo account created successfully!');
            updateHeader();
            showPage('dashboard');
        }
        
        function handleUpgrade() {
            const user = JSON.parse(localStorage.getItem('user'));
            if (!user) {
                alert('üîê Please sign in first to upgrade your account.');
                showPage('login');
                return;
            }
            
            const confirmed = confirm('üí≥ Upgrade to Pro for $19.99/month?\n\nYou will get:\n‚Ä¢ Unlimited skills\n‚Ä¢ Priority listing\n‚Ä¢ Advanced features\n‚Ä¢ Premium support');
            
            if (confirmed) {
                // Update user to pro in localStorage for demo
                user.isPro = true;
                user.plan = 'pro';
                localStorage.setItem('user', JSON.stringify(user));
                
                alert('‚úÖ Successfully upgraded to Pro! Welcome to Skill Swap Pro!');
                showPage('dashboard');
            }
        }
        
        function logout() {
            localStorage.removeItem('accessToken');
            localStorage.removeItem('refreshToken');
            localStorage.removeItem('user');
            alert('üëã Successfully logged out!');
            updateHeader();
            showPage('home');
        }
        
        function isLoggedIn() {
            return localStorage.getItem('user') !== null;
        }
        
        // UPDATE HEADER BASED ON AUTH STATE
        function updateHeader() {
            const authButtons = document.getElementById('auth-buttons');
            const user = getCurrentUser();
            
            if (user) {
                const isPro = user.isPro || false;
                authButtons.innerHTML = `
                    <span style="margin-right: 15px; color: #374151;">Welcome, ${user.name} ${isPro ? '‚≠ê' : ''}</span>
                    <button class="btn btn-secondary" data-navigate="/dashboard">Dashboard</button>
                    <button class="btn btn-primary" onclick="showAddSkill()">Add Skill</button>
                    ${!isPro ? '<button class="btn btn-success" data-navigate="/upgrade" style="margin-right: 10px;">Upgrade to Pro</button>' : ''}
                    <button class="btn btn-primary" onclick="logout()">Logout</button>
                `;
            } else {
                authButtons.innerHTML = `
                    <button class="btn btn-secondary" data-navigate="/login">Sign In</button>
                    <button class="btn btn-primary" data-navigate="/register">Get Started</button>
                    <button class="btn btn-success" data-navigate="/upgrade">Upgrade to Pro</button>
                `;
            }
            
            // Update navigation links visibility
            updateNavigationVisibility(user);
        }
        
        // UPDATE NAVIGATION VISIBILITY BASED ON AUTH STATE
        function updateNavigationVisibility(user) {
            // Update existing nav links
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                const href = link.getAttribute('href');
                
                // Hide dashboard and messages for non-authenticated users
                if (!user && (href === '/dashboard' || href === '/messages')) {
                    link.classList.add('disabled');
                    link.onclick = function(e) {
                        e.preventDefault();
                        alert('üîê Please sign in to access this feature.');
                        showPage('login');
                        return false;
                    };
                } else {
                    link.classList.remove('disabled');
                    // Remove any existing onclick handlers
                    link.onclick = null;
                }
            });
            
            // Add or remove 'Add Skill' link based on auth state
            const addSkillLink = document.querySelector('a[href="/add-skill"]');
            if (user && !addSkillLink) {
                // Create and add the 'Add Skill' link
                const navLinksContainer = document.querySelector('.nav-links');
                const addSkillLinkElement = document.createElement('a');
                addSkillLinkElement.href = '/add-skill';
                addSkillLinkElement.className = 'nav-link';
                addSkillLinkElement.textContent = 'Add Skill';
                addSkillLinkElement.onclick = function(e) {
                    e.preventDefault();
                    showAddSkill();
                };
                navLinksContainer.appendChild(addSkillLinkElement);
            } else if (!user && addSkillLink) {
                // Remove the 'Add Skill' link if user is not authenticated
                addSkillLink.remove();
            }
        }
        // NAVIGATION FUNCTIONS
        function showPage(pageName) {
            console.log('üéØ Showing page:', pageName);
            console.log('üîç Current URL before:', window.location.pathname);
            
            // Handle home page explicitly
            if (pageName === 'home' || !pageName) {
                history.pushState({page: 'home'}, '', '/');
            } else {
                // Update URL without page reload
                history.pushState({page: pageName}, '', `/${pageName}`);
            }
            
            console.log('üîç Current URL after:', window.location.pathname);
            
            // Load page content
            loadPageContent();
            
            // Update header to reflect current state
            updateHeader();
            
            console.log('‚úÖ showPage completed for:', pageName);
        }
        
        // Enhanced navigation function that works with both router and fallback
        function navigateToPage(path) {
            // Try to use the router if available
            if (window.SkillSwap && window.SkillSwap.router) {
                console.log('üß≠ Using router to navigate to:', path);
                window.SkillSwap.router.navigate(path);
            } else {
                // Fallback to manual navigation
                console.log('üß≠ Using fallback navigation to:', path);
                const pageName = path.replace('/', '') || 'home';
                showPage(pageName);
            }
        }
        
        
        
        function getCurrentUser() {
            const userStr = localStorage.getItem('user');
            return userStr ? JSON.parse(userStr) : null;
        }
        
        // BUTTON ACTION FUNCTIONS
        function viewSkillDetails(skillId) {
            alert(`üìã Skill Details: This will show detailed information about skill #${skillId || 'example'}. Feature coming soon!`);
        }
        
        function manageSkills() {
            alert('üìö Manage Skills: This will open your skills management page. Feature coming soon!');
        }
        
        function viewCalendar() {
            alert('üìÖ Calendar: This will show your booking calendar. Feature coming soon!');
        }
        
        function viewEarnings() {
            alert('üí∞ Earnings: This will show your earnings dashboard. Feature coming soon!');
        }
        
        function createSkill() {
            const title = document.getElementById('skill-title').value;
            const description = document.getElementById('skill-description').value;
            const category = document.getElementById('skill-category').value;
            const price = parseFloat(document.getElementById('skill-price').value);
            const difficulty = document.getElementById('skill-difficulty').value;
            const duration = parseInt(document.getElementById('skill-duration').value);
            
            if (!title || !description || !category || !price || !difficulty || !duration) {
                alert('Please fill in all required fields');
                return;
            }
            
            // In a real app, we would send this data to the backend
            // For now, we'll just show a success message
            alert(`‚úÖ Skill "${title}" created successfully!`);
            
            // Redirect to dashboard
            navigateToPage('/dashboard');
        }
        
        function viewReviews() {
            alert('‚≠ê Reviews: This will show all your reviews and ratings. Feature coming soon!');
        }
        
        function openConversation(userName) {
            alert(`üí¨ Opening conversation with ${userName || 'user'}. Real-time messaging feature coming soon!`);
        }
        
        function showLoginModal() {
            console.log('üîê Login modal triggered');
            navigateToPage('/login');
        }
        
        function showRegisterModal() {
            console.log('üìù Register modal triggered');
            navigateToPage('/register');
        }
        
        function showAddSkill() {
            const user = getCurrentUser();
            if (!user) {
                alert('üîê Please sign in to add a skill.');
                navigateToPage('/login');
                return;
            }
            navigateToPage('/add-skill');
        }
        
        function showUserProfile(userId) {
            navigateToPage(`/user/${userId}`);
        }
        
        // CONTENT LOADING
        function loadPageContent() {
            const path = window.location.pathname;
            const content = document.getElementById('page-content');
            
            if (!content) {
                console.error('‚ùå Page content element not found!');
                return;
            }
            
            console.log('üìÑ Loading content for path:', path);
            
            // Handle home page first
            if (path === '/' || path === '/home') {
                content.innerHTML = `
                    <!-- Hero Section -->
                    <div class="hero-section">
                        <div class="container">
                            <h1>üîÑ Welcome to Skill Swap</h1>
                            <p class="hero-subtitle">The ultimate peer-to-peer skill-sharing marketplace where knowledge meets opportunity</p>
                            
                            <div class="hero-actions">
                                <button class="btn btn-primary btn-lg" data-navigate="/browse">üîç Explore Skills</button>
                                <button class="btn btn-secondary btn-lg" data-navigate="/register">üöÄ Get Started Free</button>
                                <button class="btn btn-success btn-lg" data-navigate="/upgrade">‚≠ê Go Pro</button>
                            </div>
                        </div>
                    </div>

                    <!-- What is Skill Swap Section -->
                    <div class="what-is-section">
                        <div class="container">
                            <div class="section-header">
                                <h2>ü§ù What is Skill Swap?</h2>
                                <p class="section-description readable-text">Skill Swap is a revolutionary platform that connects people who want to share their expertise with those eager to learn. Whether you're a professional looking to monetize your skills or someone seeking to acquire new talents, our platform makes it seamless and rewarding.</p>
                            </div>
                            
                            <div class="value-props">
                                <div class="value-prop">
                                    <div class="value-icon">üéì</div>
                                    <h3>üéì Learn from Experts</h3>
                                    <p class="readable-text">Access verified professionals and skilled individuals across hundreds of categories</p>
                                </div>
                                <div class="value-prop">
                                    <div class="value-icon">üí∞</div>
                                    <h3>üí∞ Monetize Your Skills</h3>
                                    <p class="readable-text">Turn your expertise into income with our verified instructor program</p>
                                </div>
                                <div class="value-prop">
                                    <div class="value-icon">üåü</div>
                                    <h3>üåü Quality Guaranteed</h3>
                                    <p class="readable-text">Rated instructors with 3.5+ stars can earn money, ensuring high-quality experiences</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Features Section -->
                    <div class="features-section">
                        <div class="container">
                            <h2>‚ú® Powerful Features</h2>
                            <div class="features-grid">
                                <div class="feature-card">
                                    <div class="feature-icon">üí¨</div>
                                    <h3>Real-time Messaging</h3>
                                    <p class="readable-text">Instant communication with typing indicators, read receipts, and file sharing</p>
                                </div>
                                <div class="feature-card">
                                    <div class="feature-icon">üìπ</div>
                                    <h3>üìπ Video Integration</h3>
                                    <p class="readable-text">Built-in video calling powered by Jitsi Meet for seamless online sessions</p>
                                </div>
                                <div class="feature-card">
                                    <div class="feature-icon">üìÖ</div>
                                    <h3>üìÖ Smart Booking</h3>
                                    <p class="readable-text">Automated scheduling system with calendar integration and reminder notifications</p>
                                </div>
                                <div class="feature-card">
                                    <div class="feature-icon">‚≠ê</div>
                                    <h3>‚≠ê Review System</h3>
                                    <p class="readable-text">Comprehensive rating and review system to maintain quality and trust</p>
                                </div>
                                <div class="feature-card">
                                    <div class="feature-icon">üîí</div>
                                    <h3>üîí Secure Authentication</h3>
                                    <p class="readable-text">JWT-based security with Google OAuth integration for safe account management</p>
                                </div>
                                <div class="feature-card">
                                    <div class="feature-icon">üì±</div>
                                    <h3>üì± Mobile Responsive</h3>
                                    <p class="readable-text">Fully responsive design works perfectly on desktop, tablet, and mobile devices</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Subscription Tiers Section -->
                    <div class="tiers-section">
                        <div class="container">
                            <h2>üéØ Choose Your Plan</h2>
                            <div class="tiers-grid">
                                <div class="tier-card free">
                                    <div class="tier-header">
                                        <h3>üÜì Free</h3>
                                        <div class="tier-price">$0<span>/month</span></div>
                                    </div>
                                    <ul class="tier-features">
                                        <li>‚úÖ Basic skill sharing</li>
                                        <li>‚úÖ Up to 3 skills</li>
                                        <li>‚úÖ Basic messaging</li>
                                        <li>‚úÖ Standard support</li>
                                        <li>‚ùå Video calling</li>
                                        <li>‚ùå Priority listing</li>
                                    </ul>
                                    <button class="btn btn-secondary btn-full" onclick="showPage('register')">Get Started</button>
                                </div>
                                
                                <div class="tier-card verified">
                                    <div class="tier-header">
                                        <h3>‚úÖ Verified</h3>
                                        <div class="tier-price">$9.99<span>/month</span></div>
                                    </div>
                                    <ul class="tier-features">
                                        <li>‚úÖ Everything in Free</li>
                                        <li>‚úÖ Verified instructor badge</li>
                                        <li>‚úÖ Video calling</li>
                                        <li>‚úÖ Priority support</li>
                                        <li>‚úÖ Can earn money (3.5+ stars)</li>
                                        <li>‚úÖ Advanced analytics</li>
                                    </ul>
                                    <button class="btn btn-primary btn-full" onclick="showPage('upgrade')">Upgrade</button>
                                </div>
                                
                                <div class="tier-card pro popular">
                                    <div class="tier-badge">üî• Most Popular</div>
                                    <div class="tier-header">
                                        <h3>‚≠ê Pro</h3>
                                        <div class="tier-price">$19.99<span>/month</span></div>
                                    </div>
                                    <ul class="tier-features">
                                        <li>‚úÖ Everything in Verified</li>
                                        <li>‚úÖ Unlimited skills</li>
                                        <li>‚úÖ Priority listing</li>
                                        <li>‚úÖ Custom branding</li>
                                        <li>‚úÖ Advanced features</li>
                                        <li>‚úÖ Premium support</li>
                                    </ul>
                                    <button class="btn btn-success btn-full" onclick="showPage('upgrade')">Go Pro</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- How It Works Section -->
                    <div class="how-it-works-section">
                        <div class="container">
                            <h2>üöÄ How It Works</h2>
                            <div class="steps-grid">
                                <div class="step">
                                    <div class="step-number">1</div>
                                    <h3>Create Your Profile</h3>
                                    <p>Sign up for free and showcase your skills with detailed descriptions and portfolio items</p>
                                </div>
                                <div class="step">
                                    <div class="step-number">2</div>
                                    <h3>Connect & Communicate</h3>
                                    <p>Browse skills, message instructors, and schedule sessions that fit your schedule</p>
                                </div>
                                <div class="step">
                                    <div class="step-number">3</div>
                                    <h3>Learn & Earn</h3>
                                    <p>Attend sessions, leave reviews, and start earning money as a verified instructor</p>
                                </div>
                                <div class="step">
                                    <div class="step-number">4</div>
                                    <h3>Grow Your Network</h3>
                                    <p>Build relationships, expand your skills, and become part of our thriving community</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Section -->
                    <div class="stats-section">
                        <div class="container">
                            <div class="stats-grid">
                                <div class="stat">
                                    <div class="stat-number">10K+</div>
                                    <div class="stat-label">Active Users</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-number">500+</div>
                                    <div class="stat-label">Skill Categories</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-number">50K+</div>
                                    <div class="stat-label">Sessions Completed</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-number">4.9‚òÖ</div>
                                    <div class="stat-label">Average Rating</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CTA Section -->
                    <div class="cta-section">
                        <div class="container">
                            <h2>Ready to Start Your Skill Journey?</h2>
                            <p>Join thousands of learners and teachers in our growing community</p>
                            <div class="cta-actions">
                                <button class="btn btn-primary btn-lg" onclick="showPage('register')">üöÄ Join Free Today</button>
                                <button class="btn btn-secondary btn-lg" data-navigate="/browse">üîç Explore Skills First</button>
                            </div>
                        </div>
                    </div>
                `;
                console.log('üè† Homepage loaded successfully');
                return;
            }
            
            switch (path) {
                case '/':
                case '':
                case '/home':
                    content.innerHTML = `
                        <!-- Hero Section -->
                        <div class="hero-section">
                            <div class="container">
                                <h1>üîÑ Welcome to Skill Swap</h1>
                                <p class="hero-subtitle">The ultimate peer-to-peer skill-sharing marketplace where knowledge meets opportunity</p>
                                
                                <div class="hero-actions">
                                    <button class="btn btn-primary btn-lg" data-navigate="/browse">üîç Explore Skills</button>
                                    <button class="btn btn-secondary btn-lg" data-navigate="/register">üöÄ Get Started Free</button>
                                    <button class="btn btn-success btn-lg" data-navigate="/upgrade">‚≠ê Go Pro</button>
                                </div>
                            </div>
                        </div>

                        <!-- What is Skill Swap Section -->
                        <div class="what-is-section">
                            <div class="container">
                                <div class="section-header">
                                    <h2>ü§ù What is Skill Swap?</h2>
                                    <p class="section-description readable-text">Skill Swap is a revolutionary platform that connects people who want to share their expertise with those eager to learn. Whether you're a professional looking to monetize your skills or someone seeking to acquire new talents, our platform makes it seamless and rewarding.</p>
                                </div>
                                
                                <div class="value-props">
                                    <div class="value-prop">
                                        <div class="value-icon">üéì</div>
                                        <h3>üéì Learn from Experts</h3>
                                        <p class="readable-text">Access verified professionals and skilled individuals across hundreds of categories</p>
                                    </div>
                                    <div class="value-prop">
                                        <div class="value-icon">üí∞</div>
                                        <h3>üí∞ Monetize Your Skills</h3>
                                        <p class="readable-text">Turn your expertise into income with our verified instructor program</p>
                                    </div>
                                    <div class="value-prop">
                                        <div class="value-icon">üåü</div>
                                        <h3>üåü Quality Guaranteed</h3>
                                        <p class="readable-text">Rated instructors with 3.5+ stars can earn money, ensuring high-quality experiences</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Features Section -->
                        <div class="features-section">
                            <div class="container">
                                <h2>‚ú® Powerful Features</h2>
                                <div class="features-grid">
                                    <div class="feature-card">
                                        <div class="feature-icon">üí¨</div>
                                        <h3>Real-time Messaging</h3>
                                        <p class="readable-text">Instant communication with typing indicators, read receipts, and file sharing</p>
                                    </div>
                                    <div class="feature-card">
                                        <div class="feature-icon">üìπ</div>
                                        <h3>üìπ Video Integration</h3>
                                        <p class="readable-text">Built-in video calling powered by Jitsi Meet for seamless online sessions</p>
                                    </div>
                                    <div class="feature-card">
                                        <div class="feature-icon">üìÖ</div>
                                        <h3>üìÖ Smart Booking</h3>
                                        <p class="readable-text">Automated scheduling system with calendar integration and reminder notifications</p>
                                    </div>
                                    <div class="feature-card">
                                        <div class="feature-icon">‚≠ê</div>
                                        <h3>‚≠ê Review System</h3>
                                        <p class="readable-text">Comprehensive rating and review system to maintain quality and trust</p>
                                    </div>
                                    <div class="feature-card">
                                        <div class="feature-icon">üîí</div>
                                        <h3>üîí Secure Authentication</h3>
                                        <p class="readable-text">JWT-based security with Google OAuth integration for safe account management</p>
                                    </div>
                                    <div class="feature-card">
                                        <div class="feature-icon">üì±</div>
                                        <h3>üì± Mobile Responsive</h3>
                                        <p class="readable-text">Fully responsive design works perfectly on desktop, tablet, and mobile devices</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Subscription Tiers Section -->
                        <div class="tiers-section">
                            <div class="container">
                                <h2>üéØ Choose Your Plan</h2>
                                <div class="tiers-grid">
                                    <div class="tier-card free">
                                        <div class="tier-header">
                                            <h3>üÜì Free</h3>
                                            <div class="tier-price">$0<span>/month</span></div>
                                        </div>
                                        <ul class="tier-features">
                                            <li>‚úÖ Basic skill sharing</li>
                                            <li>‚úÖ Up to 3 skills</li>
                                            <li>‚úÖ Basic messaging</li>
                                            <li>‚úÖ Standard support</li>
                                            <li>‚ùå Video calling</li>
                                            <li>‚ùå Priority listing</li>
                                        </ul>
                                        <button class="btn btn-secondary btn-full" onclick="showPage('register')">Get Started</button>
                                    </div>
                                    
                                    <div class="tier-card verified">
                                        <div class="tier-header">
                                            <h3>‚úÖ Verified</h3>
                                            <div class="tier-price">$9.99<span>/month</span></div>
                                        </div>
                                        <ul class="tier-features">
                                            <li>‚úÖ Everything in Free</li>
                                            <li>‚úÖ Verified instructor badge</li>
                                            <li>‚úÖ Video calling</li>
                                            <li>‚úÖ Priority support</li>
                                            <li>‚úÖ Can earn money (3.5+ stars)</li>
                                            <li>‚úÖ Advanced analytics</li>
                                        </ul>
                                        <button class="btn btn-primary btn-full" onclick="showPage('upgrade')">Upgrade</button>
                                    </div>
                                    
                                    <div class="tier-card pro popular">
                                        <div class="tier-badge">üî• Most Popular</div>
                                        <div class="tier-header">
                                            <h3>‚≠ê Pro</h3>
                                            <div class="tier-price">$19.99<span>/month</span></div>
                                        </div>
                                        <ul class="tier-features">
                                            <li>‚úÖ Everything in Verified</li>
                                            <li>‚úÖ Unlimited skills</li>
                                            <li>‚úÖ Priority listing</li>
                                            <li>‚úÖ Custom branding</li>
                                            <li>‚úÖ Advanced features</li>
                                            <li>‚úÖ Premium support</li>
                                        </ul>
                                        <button class="btn btn-success btn-full" onclick="showPage('upgrade')">Go Pro</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- How It Works Section -->
                        <div class="how-it-works-section">
                            <div class="container">
                                <h2>üöÄ How It Works</h2>
                                <div class="steps-grid">
                                    <div class="step">
                                        <div class="step-number">1</div>
                                        <h3>Create Your Profile</h3>
                                        <p>Sign up for free and showcase your skills with detailed descriptions and portfolio items</p>
                                    </div>
                                    <div class="step">
                                        <div class="step-number">2</div>
                                        <h3>Connect & Communicate</h3>
                                        <p>Browse skills, message instructors, and schedule sessions that fit your schedule</p>
                                    </div>
                                    <div class="step">
                                        <div class="step-number">3</div>
                                        <h3>Learn & Earn</h3>
                                        <p>Attend sessions, leave reviews, and start earning money as a verified instructor</p>
                                    </div>
                                    <div class="step">
                                        <div class="step-number">4</div>
                                        <h3>Grow Your Network</h3>
                                        <p>Build relationships, expand your skills, and become part of our thriving community</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Stats Section -->
                        <div class="stats-section">
                            <div class="container">
                                <div class="stats-grid">
                                    <div class="stat">
                                        <div class="stat-number">10K+</div>
                                        <div class="stat-label">Active Users</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-number">500+</div>
                                        <div class="stat-label">Skill Categories</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-number">50K+</div>
                                        <div class="stat-label">Sessions Completed</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-number">4.9‚òÖ</div>
                                        <div class="stat-label">Average Rating</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CTA Section -->
                        <div class="cta-section">
                            <div class="container">
                                <h2>Ready to Start Your Skill Journey?</h2>
                                <p>Join thousands of learners and teachers in our growing community</p>
                                <div class="cta-actions">
                                    <button class="btn btn-primary btn-lg" onclick="showPage('register')">üöÄ Join Free Today</button>
                                    <button class="btn btn-secondary btn-lg" data-navigate="/browse">üîç Explore Skills First</button>
                                </div>
                            </div>
                        </div>
                    `;
                    console.log('üè† Homepage loaded successfully');
                    return;
                case '/login':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px; max-width: 500px;">
                            <h1>üîê Sign In to Skill Swap</h1>
                            <p>Welcome back! Sign in to your account.</p>
                            
                            <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 20px 0;">
                                <form id="loginForm">
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Email:</label>
                                        <input type="email" id="loginEmail" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;">
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Password:</label>
                                        <input type="password" id="loginPassword" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;">
                                    </div>
                                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 15px;">Sign In</button>
                                </form>
                                
                                <div style="text-align: center; margin: 20px 0;">
                                    <p style="color: #6B7280;">OR</p>
                                </div>
                                
                                <button class="btn btn-secondary" onclick="signInWithGoogle()" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;">
                                    <span>üîç</span> Sign in with Google
                                </button>
                                
                                <div style="text-align: center; margin-top: 20px;">
                                    <p>Don't have an account? <a href="#" data-navigate="/register" style="color: #3B82F6;">Sign up here</a></p>
                                </div>
                            </div>
                            
                            <div style="text-align: center;">
                                <button class="btn btn-secondary" data-navigate="/">‚Üê Back to Home</button>
                            </div>
                        </div>
                    `;
                    
                    // Add event listener for login form
                    const loginForm = document.getElementById('loginForm');
                    if (loginForm) {
                        loginForm.addEventListener('submit', handleLogin);
                    }
                    break;
                    
                case '/register':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px; max-width: 500px;">
                            <h1>üìù Create Your Account</h1>
                            <p>Join Skill Swap and start sharing your skills!</p>
                            
                            <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 20px 0;">
                                <form id="registerForm">
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Full Name:</label>
                                        <input type="text" id="registerName" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;">
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Email:</label>
                                        <input type="email" id="registerEmail" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;">
                                    </div>
                                    <div style="margin-bottom: 20px;">
                                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Password:</label>
                                        <input type="password" id="registerPassword" required minlength="8" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px;" placeholder="Must include uppercase, lowercase, number & symbol">
                                        <div style="font-size: 12px; color: #6B7280; margin-top: 5px;">Password must be at least 8 characters with uppercase, lowercase, number & symbol</div>
                                    </div>
                                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 15px;">Create Account</button>
                                </form>
                                
                                <div style="text-align: center; margin: 20px 0;">
                                    <p style="color: #6B7280;">OR</p>
                                </div>
                                
                                <button class="btn btn-secondary" onclick="signUpWithGoogle()" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;">
                                    <span>üîç</span> Sign up with Google
                                </button>
                                
                                <div style="text-align: center; margin-top: 20px;">
                                    <p>Already have an account? <a href="#" data-navigate="/login" style="color: #3B82F6;">Sign in here</a></p>
                                </div>
                            </div>
                            
                            <div style="text-align: center;">
                                <button class="btn btn-secondary" data-navigate="/">‚Üê Back to Home</button>
                            </div>
                        </div>
                    `;
                    
                    // Add event listener for register form
                    const registerForm = document.getElementById('registerForm');
                    if (registerForm) {
                        registerForm.addEventListener('submit', handleRegister);
                    }
                    break;
                    
                case '/upgrade':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px; max-width: 600px;">
                            <h1>‚≠ê Upgrade to Skill Swap Pro</h1>
                            <p>Unlock premium features and take your skills to the next level!</p>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0;">
                                <!-- Free Plan -->
                                <div style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border: 2px solid #e5e7eb;">
                                    <h3>Free Plan</h3>
                                    <p style="font-size: 24px; font-weight: bold; color: #10B981;">$0/month</p>
                                    <ul style="list-style: none; padding: 0;">
                                        <li>‚úÖ Basic skill sharing</li>
                                        <li>‚úÖ Up to 3 skills</li>
                                        <li>‚úÖ Basic messaging</li>
                                        <li>‚ùå Priority support</li>
                                        <li>‚ùå Advanced analytics</li>
                                        <li>‚ùå Custom branding</li>
                                    </ul>
                                    <p style="text-align: center; font-weight: bold; color: #6B7280;">Current Plan</p>
                                </div>
                                
                                <!-- Pro Plan -->
                                <div style="background: linear-gradient(135deg, #3B82F6, #1D4ED8); color: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 2px solid #3B82F6;">
                                    <h3>Pro Plan</h3>
                                    <p style="font-size: 24px; font-weight: bold;">$19.99/month</p>
                                    <ul style="list-style: none; padding: 0;">
                                        <li>‚úÖ Unlimited skills</li>
                                        <li>‚úÖ Priority listing</li>
                                        <li>‚úÖ Advanced messaging</li>
                                        <li>‚úÖ Priority support</li>
                                        <li>‚úÖ Detailed analytics</li>
                                        <li>‚úÖ Custom profile branding</li>
                                        <li>‚úÖ Video call integration</li>
                                        <li>‚úÖ Premium badge</li>
                                    </ul>
                                    <button class="btn btn-success" onclick="handleUpgrade()" style="width: 100%; background: #10B981; border: none;">Upgrade Now</button>
                                </div>
                            </div>
                            
                            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                <h4>Why Upgrade to Pro?</h4>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                    <div>üöÄ <strong>Get More Bookings:</strong> Priority placement in search results</div>
                                    <div>üìä <strong>Track Success:</strong> Advanced analytics and insights</div>
                                    <div>üí¨ <strong>Better Communication:</strong> Video calls and advanced messaging</div>
                                    <div>‚≠ê <strong>Stand Out:</strong> Premium badge and custom branding</div>
                                </div>
                            </div>
                            
                            <div style="text-align: center;">
                                <button class="btn btn-secondary" data-navigate="/">‚Üê Back to Home</button>
                                <button class="btn btn-primary" data-navigate="/dashboard">View Dashboard</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case '/browse':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px;">
                            <h1>üîç Browse Skills</h1>
                            <p>Discover amazing skills shared by our community members.</p>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üé∏ Guitar Lessons</h3>
                                    <p>Learn acoustic and electric guitar from beginner to advanced levels.</p>
                                    <p><strong>$25/hour</strong></p>
                                    <button class="btn btn-primary" onclick="viewSkillDetails('guitar-lessons')">View Details</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üíª Web Development</h3>
                                    <p>Full-stack development using React, Node.js, and modern tools.</p>
                                    <p><strong>$50/hour</strong></p>
                                    <button class="btn btn-primary" onclick="viewSkillDetails('web-development')">View Details</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üé® Digital Art</h3>
                                    <p>Learn digital illustration and design using Photoshop and Illustrator.</p>
                                    <p><strong>$30/hour</strong></p>
                                    <button class="btn btn-primary" onclick="viewSkillDetails('digital-art')">View Details</button>
                                </div>
                            </div>
                            
                            <div style="margin: 20px 0; text-align: center;">
                                <button class="btn btn-secondary" data-navigate="/">‚Üê Back to Home</button>
                                <button class="btn btn-primary" data-navigate="/dashboard">Go to Dashboard</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case '/dashboard':
                    const user = getCurrentUser();
                    if (!user) {
                        alert('üîê Please sign in to access your dashboard.');
                        showPage('login');
                        return;
                    }
                    
                    const isPro = user.isPro || false;
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <div>
                                    <h1>üìã Welcome back, ${user.name}!</h1>
                                    <p>Your personal dashboard ${isPro ? '‚≠ê Pro Member' : 'üÜì Free Plan'}</p>
                                </div>
                                <div>
                                    ${!isPro ? '<button class="btn btn-success" data-navigate="/upgrade">Upgrade to Pro</button>' : '<span style="background: linear-gradient(135deg, #3B82F6, #1D4ED8); color: white; padding: 8px 16px; border-radius: 20px; font-weight: bold;">‚≠ê PRO</span>'}
                                    <button class="btn btn-secondary" onclick="logout()" style="margin-left: 10px;">Logout</button>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üìö Your Skills</h3>
                                    <p>${isPro ? 'Unlimited skills' : '3 skills max'}</p>
                                    <p style="color: #6B7280;">Currently: 2 active skills</p>
                                    <button class="btn btn-primary" onclick="manageSkills()">Manage Skills</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üìÖ Upcoming Sessions</h3>
                                    <p>2 sessions this week</p>
                                    <p style="color: #6B7280;">Next: Tomorrow 2:00 PM</p>
                                    <button class="btn btn-primary" onclick="viewCalendar()">View Calendar</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>üí∞ Earnings</h3>
                                    <p>$${isPro ? '245' : '150'} this month</p>
                                    <p style="color: #6B7280;">${isPro ? '+63% vs last month' : 'Upgrade for more earnings'}</p>
                                    <button class="btn btn-primary" onclick="viewEarnings()">View Details</button>
                                </div>
                                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h3>‚≠ê Reviews</h3>
                                    <p>4.8/5 average rating</p>
                                    <p style="color: #6B7280;">12 total reviews</p>
                                    <button class="btn btn-primary" onclick="viewReviews()">View Reviews</button>
                                </div>
                            </div>
                            
                            ${isPro ? `
                                <div style="background: linear-gradient(135deg, #3B82F6, #1D4ED8); color: white; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                    <h3>‚≠ê Pro Features Active</h3>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                        <div>‚úÖ Unlimited Skills</div>
                                        <div>‚úÖ Priority Listing</div>
                                        <div>‚úÖ Advanced Analytics</div>
                                        <div>‚úÖ Video Call Integration</div>
                                    </div>
                                </div>
                            ` : `
                                <div style="background: #f0f9ff; border: 2px solid #3B82F6; padding: 20px; border-radius: 8px; margin: 20px 0; text-align: center;">
                                    <h3>üöÄ Ready to Level Up?</h3>
                                    <p>Upgrade to Pro and unlock unlimited skills, priority listing, and premium features!</p>
                                    <button class="btn btn-success" data-navigate="/upgrade">Upgrade to Pro - $19.99/month</button>
                                </div>
                            `}
                            
                            <div style="margin: 20px 0; text-align: center;">
                                <button class="btn btn-primary" data-navigate="/browse">Browse Skills</button>
                                <button class="btn btn-secondary" data-navigate="/messages">Messages</button>
                                <button class="btn btn-secondary" data-navigate="/">‚Üê Back to Home</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case '/messages':
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px;">
                            <h1>üí¨ Messages</h1>
                            <p>Your conversations with other users.</p>
                            
                            <div style="background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 20px 0;">
                                <div style="padding: 20px; border-bottom: 1px solid #e5e7eb; cursor: pointer; transition: background-color 0.2s;" onclick="openConversation('John Smith')" onmouseover="this.style.backgroundColor='#f9fafb'" onmouseout="this.style.backgroundColor='white'">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 40px; height: 40px; border-radius: 50%; background: #3B82F6; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">JS</div>
                                        <div>
                                            <h4 style="margin: 0;">John Smith</h4>
                                            <p style="margin: 0; color: #6B7280; font-size: 14px;">About guitar lessons...</p>
                                        </div>
                                        <div style="margin-left: auto; color: #6B7280; font-size: 12px;">2 min ago</div>
                                    </div>
                                </div>
                                <div style="padding: 20px; border-bottom: 1px solid #e5e7eb; cursor: pointer; transition: background-color 0.2s;" onclick="openConversation('Emily Chen')" onmouseover="this.style.backgroundColor='#f9fafb'" onmouseout="this.style.backgroundColor='white'">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 40px; height: 40px; border-radius: 50%; background: #10B981; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">EM</div>
                                        <div>
                                            <h4 style="margin: 0;">Emily Chen</h4>
                                            <p style="margin: 0; color: #6B7280; font-size: 14px;">Web development project...</p>
                                        </div>
                                        <div style="margin-left: auto; color: #6B7280; font-size: 12px;">1 hour ago</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin: 20px 0; text-align: center;">
                                <button class="btn btn-secondary" data-navigate="/">‚Üê Back to Home</button>
                                <button class="btn btn-primary" data-navigate="/browse">Browse Skills</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case '/add-skill':
                    const currentUser = getCurrentUser();
                    if (!currentUser) {
                        alert('üîê Please sign in to add a skill.');
                        navigateToPage('/login');
                        return;
                    }
                    
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px;">
                            <h1>‚ûï Add New Skill</h1>
                            <p>Share your expertise with our community.</p>
                            
                            <div style="max-width: 600px; margin: 0 auto;">
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">Skill Title</label>
                                    <input type="text" id="skill-title" placeholder="e.g., Guitar Lessons, Web Development" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;">
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">Description</label>
                                    <textarea id="skill-description" placeholder="Describe what you'll teach..." rows="4" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;"></textarea>
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">Category</label>
                                    <select id="skill-category" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;">
                                        <option value="">Select a category</option>
                                        <option value="music">üéµ Music & Arts</option>
                                        <option value="tech">üíª Technology</option>
                                        <option value="business">üíº Business</option>
                                        <option value="languages">üåç Languages</option>
                                        <option value="cooking">üë®‚Äçüç≥ Cooking</option>
                                        <option value="fitness">üí™ Fitness</option>
                                    </select>
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">Price per Hour ($)</label>
                                    <input type="number" id="skill-price" min="0" step="0.01" placeholder="0.00" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;">
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">Difficulty Level</label>
                                    <select id="skill-difficulty" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;">
                                        <option value="beginner">Beginner</option>
                                        <option value="intermediate">Intermediate</option>
                                        <option value="advanced">Advanced</option>
                                    </select>
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">Duration (minutes)</label>
                                    <input type="number" id="skill-duration" min="15" step="15" value="60" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;">
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">Location Type</label>
                                    <select id="skill-location-type" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;">
                                        <option value="online">Online (Video Call)</option>
                                        <option value="in-person">In-Person</option>
                                        <option value="hybrid">Hybrid (Both)</option>
                                    </select>
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">Tags (comma separated)</label>
                                    <input type="text" id="skill-tags" placeholder="e.g., guitar, music, beginner, online" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;">
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">What You'll Learn</label>
                                    <textarea id="skill-what-you-learn" placeholder="What will students learn?" rows="3" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;"></textarea>
                                </div>
                                
                                <div style="margin-bottom: 20px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: bold;">Requirements</label>
                                    <textarea id="skill-requirements" placeholder="What do students need to bring/prepare?" rows="2" style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;"></textarea>
                                </div>
                                
                                <button class="btn btn-primary" onclick="createSkill()" style="width: 100%; padding: 15px; font-size: 18px; margin-bottom: 15px;">Publish Skill</button>
                                
                                <div style="text-align: center;">
                                    <button class="btn btn-secondary" data-navigate="/dashboard">‚Üê Back to Dashboard</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case (path.startsWith('/user/') && path.split('/').length === 3):
                    const profileUserId = path.split('/')[2];
                    
                    // In a real app, we would fetch user data from the API
                    // For now, we'll use a placeholder
                    content.innerHTML = `
                        <div class="container" style="padding: 40px 20px;">
                            <div style="text-align: center; margin-bottom: 40px;">
                                <div style="width: 120px; height: 120px; border-radius: 50%; background: #3B82F6; display: flex; align-items: center; justify-content: center; color: white; font-size: 48px; margin: 0 auto 20px;">${profileUserId.charAt(0).toUpperCase()}</div>
                                <h1>${profileUserId}'s Profile</h1>
                                <p style="color: #6B7280;">Skill Instructor & Community Member</p>
                                <div style="display: flex; justify-content: center; gap: 30px; margin-top: 20px;">
                                    <div><strong>24</strong><br><span style="color: #6B7280;">Skills</span></div>
                                    <div><strong>4.8‚òÖ</strong><br><span style="color: #6B7280;">Rating</span></div>
                                    <div><strong>156</strong><br><span style="color: #6B7280;">Students</span></div>
                                </div>
                            </div>
                            
                            <div style="margin: 40px 0;">
                                <h2>üìö Featured Skills</h2>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                                    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <h3>üé∏ Guitar Lessons</h3>
                                        <p>Learn acoustic and electric guitar from beginner to advanced levels.</p>
                                        <p><strong>$25/hour</strong></p>
                                        <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                                            <span style="color: #F59E0B;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                            <span style="color: #6B7280;">4.9 (42 reviews)</span>
                                        </div>
                                    </div>
                                    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <h3>üéµ Music Theory</h3>
                                        <p>Understand the fundamentals of music, scales, chords, and composition.</p>
                                        <p><strong>$30/hour</strong></p>
                                        <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                                            <span style="color: #F59E0B;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                            <span style="color: #6B7280;">4.7 (28 reviews)</span>
                                        </div>
                                    </div>
                                    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                        <h3>üéπ Piano Basics</h3>
                                        <p>Start your musical journey with fundamental piano techniques.</p>
                                        <p><strong>$35/hour</strong></p>
                                        <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                                            <span style="color: #F59E0B;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                            <span style="color: #6B7280;">4.8 (35 reviews)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="text-align: center;">
                                <button class="btn btn-primary" onclick="openConversation('${profileUserId}')">Send Message</button>
                                <button class="btn btn-secondary" data-navigate="/">‚Üê Back to Home</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                default:
                    // For any unknown route, redirect to home
                    console.log('‚ö†Ô∏è Unknown route:', path, '- redirecting to home');
                    showPage('home');
                    break;
            }
        }
        
        // INITIALIZE EVERYTHING
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üì± DOM loaded, initializing bulletproof navigation...');
            
            // Update header based on auth state immediately
            updateHeader();
            
            // Load appropriate content for current page
            loadPageContent();
            
            // Handle browser back/forward buttons
            window.addEventListener('popstate', function(e) {
                console.log('üîô Browser back/forward button pressed');
                loadPageContent();
                updateHeader();
            });
            
            // Add global test function for debugging
            window.testNavigation = function() {
                console.log('üß™ Testing navigation...');
                console.log('Current page:', window.location.pathname);
                
                console.log('üåØ Testing Browse navigation...');
                navigateToPage('/browse');
                
                setTimeout(() => {
                    console.log('üåØ Testing Dashboard navigation...');
                    navigateToPage('/dashboard');
                }, 1000);
                
                setTimeout(() => {
                    console.log('üåØ Testing Home navigation...');
                    navigateToPage('/');
                }, 2000);
            };
            
            // Handle data-navigate attributes
            document.addEventListener('click', function(e) {
                const navButton = e.target.closest('[data-navigate]');
                if (navButton) {
                    e.preventDefault();
                    const path = navButton.getAttribute('data-navigate');
                    navigateToPage(path);
                }
            });
            
            console.log('üéâ Bulletproof navigation system ready!');
            console.log('üß™ Type "testNavigation()" in console to test navigation');
        });
        
        // Also update header when page loads initially (in case DOM is already ready)
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', updateHeader);
        } else {
            updateHeader();
        }
        
        console.log('üìã Script loaded successfully');
    </script>
</body>
</html>